const eventsUrl="https://api.eventglo.io/api/Event/GetAllEvents";let events=[],publishedEvents=[{title:"test Event 1",eventType:0,capacity:100,category:"Virtual",description:"description",tags:"Technical",country:"Nigeria",timezone:"UTC+1 Lagos",isPrivate:!0,startDate:new Date},{title:"test Event 2",eventType:1,capacity:100,category:"Virtual",description:"description",tags:"Technical",country:"Nigeria",timezone:"UTC+1 Lagos",isPrivate:!0,startDate:new Date},{title:"test Event 3",eventType:0,capacity:100,category:"Virtual",description:"description",tags:"Technical",country:"Nigeria",timezone:"UTC+1 Lagos",isPrivate:!0,startDate:new Date}],submitting=!1;const eventWrapper=document.querySelector("#wrapper"),closeModal=()=>{let e=document.querySelector("#myModal");console.log("modal",e),e.setAttribute("style","display: none")},createModal=()=>{let e=`
    <div id="myModal" class="eventglo__modal">
      <!-- Modal content -->
      <div class="eventglo__modal-content">
        <span class="eventglo__close" onClick="closeModal()">&times;</span>
        <div id="">
            <form>
                <div class="zt-mt-1">
                    <div class="label">Full Name</div>
                    <div>
                        <input type="text" class="eventglo__input" name="name" placeholder="name">
                    </div>
                </div>   
                
                <div class="zt-mt-1">
                    <div class="label">Your Gender</div>
                    <div>
                    <select name="gender" id="gender" class="eventglo__input">
                        <option value="Male">Male</option>
                        <option value="Female">Female</option>
                        <option value="Other">Prefer Not say</option>
                    </select>
                    </div>
                </div>
            
                <div class="zt-mt-1">
                    <div class="label">Email</div>
                    <div>
                        <input type="email" name="email" class="eventglo__input">
                    </div>
                </div>  
                
                <div class="zt-mt-1">
                    <div class="label">Phone Number</div>
                    <div>
                        <input type="text" name="phoneNum" class="eventglo__input">
                    </div>
                </div>  
                
                <div>
                    <div class="label">Country</div>
                    <select name="country" id="country" class="eventglo__input">
                        <option value="USA">USA</option>
                        <option value="Canada">Canada</option>
                        <option value="England">England</option>
                        <option value="FinLand">FinLand</option>
                        <option value="Ghana">Ghana</option>
                        <option value="Netherlands">Netherlands</option>
                        <option value="Nigeria">Nigeria</option>
                        <option value="SouthAfrica">SouthAfrica</option>
                        <option value="United Kingdom">United Kingdom</option>
                        <option value="Eygpt">SouthAfrica</option>
                    </select>
                </div>
                
                <!-- *ngIf="regForm.value['heardAboutUs'] !== 'Other' " -->
                <div class="zt-mt-1">
                    <div class="label">How did you hear about us</div>
                    <div>
                        <select name="heardAboutUs" id="heardAboutUs" class="eventglo__input">
                            <option value="Online search">Online search</option>
                            <option value="Social media (Facebook, Twitter, Instagram, etc.)">Social media (Facebook, Twitter, Instagram, etc.)</option>
                            <option value="Word of mouth">Word of mouth</option>
                            <option value="Print media (newspaper, magazine)">Print media (newspaper, magazine)</option>
                            <option value="Referral from a friend">Referral from a friend</option>
                            <option value="Television advertisement">Television advertisement</option>
                            <option value="Direct mail or flyer">Direct mail or flyer</option>
                            <option value="Other">Other</option>
                        </select>
                    </div>
                </div>
            
            
                <div class="btn-wrapper" style="display: flex; justify-content: center; margin: 20px auto;">
                    <button id="e__submit-btn" class="eventglo__submit-btn" type="button" onclick="registerEvent()">
                        <span>
                            ${submitting?"Loading":"Register for Event"}
                        </span>
                    </button>
                </div>
            </form>
        </div>
      </div>
    </div>
    `;eventWrapper.innerHTML=e},populateTemplate=e=>{let t=`
        <div id="card-${e.eventId}" class="card s-card" style="position: relative;">
        <div class="tag" style="display: ${0===e.eventType?"block":"none"}">
            Free
        </div>
        <div class=" mt-3 d-flex">
            <div>
                <img class="mt-2 zt-w-46" src="${e.media||"e-image3.png"}" width="80px" height="80px" alt="" style="margin-top: 2px; object-fit: contain; margin-right: 10px;">
            </div>
            <div>
                <h5 class="mt-1 s-cardtitle">${e.title||"--"}</h5>
                <!-- <h5 class="card-title">Simple event to test for embedding of event to client's website</h5> -->
            </div>
        </div>
        <div class="card-body" style="margin-top: -10px;">
            <h5 class="card-text-title">${e.title||"--"}</h5>
            <img class="mr-1" width="15" src="timer.png" alt="" style="margin-bottom: 5px;">
            <!-- <small class="text-muted s-date">{{ eventRecord?.startDate | date }}</small> -->
            <small class="text-muted s-date">${e.startDate}</small>
            <img class="ml-2 mr-1" width="12" src="avatar-icon.png" alt=""
            style="margin-bottom: 5px;">
            <small class="text-muted s-date">1/${e.capacity}</small>
            <p class="mt-2 card-text s-cardtext">${e.description||"--"}</p>
        </div>
        <div style="display: flex; justify-content: center;">
            <button class="s-btn submit-btn" style="width: max-content; text-align: center; border: none" type="button" onClick="openRegistrationModal()">
                Register for Event
                <img class="zt-w-10" style="margin-left: 5px; padding-bottom: 1px;"
                    [src]="iconBaseUrl + 'arrow-right-blue.png' " alt=""
                >
            </button>
        </div>
        </div>
    `;return t},openRegistrationModal=()=>{createModal()},getAllEvents=async()=>{fetch("https://api.eventglo.io/api/Event/GetAllEvents").then(e=>e.json()).then(e=>{if(publishedEvents=(events=e.data).filter(e=>!0===e.isPublish),console.log("events",publishedEvents),publishedEvents.length>0){let t=document.createElement("h2");t.textContent="Upcoming Events",t.style.margin="10px 0",eventWrapper.appendChild(t),publishedEvents.forEach(e=>{let t=document.createElement("div");t.innerHTML=populateTemplate(e),eventWrapper.appendChild(t);let i=document.querySelector(".submit-btn");i.addEventListener("click",()=>openRegistrationModal())})}}).catch(e=>{publishedEvents.forEach(e=>{let t=document.createElement("div");t.innerHTML=populateTemplate(e),eventWrapper.appendChild(t);let i=document.querySelector(".submit-btn");i.addEventListener("click",()=>openRegistrationModal())}),console.log(e)})},registerEvent=async()=>{submitting=!0,openRegistrationModal();let e={name:"Michael",gender:"Male",email:"michaelozor15@gmail.com",phoneNum:"08108816975",country:"Nigeria",media:"",heardAboutUs:"Online search"};fetch("https://api.eventglo.io/api/Event/RegisterForEvent",{method:"POST",mode:"cors",cache:"no-cache",credentials:"same-origin",headers:{"Content-Type":"application/json"},redirect:"follow",referrerPolicy:"no-referrer",body:JSON.stringify(e)}).then(e=>e.json()).then(e=>{submitting=!1,console.log(e)}).catch(e=>{submitting=!1,console.log(e)})};getAllEvents();